<div>
 version: {{version}}
</div><div>
 username: {{username}}
</div>
<button class="btn btn-default" type="button" (click)="newForm()" *ngIf="!displayForm">New Form</button>

<div class="container" *ngIf="displayForm">
  <div>
    <form class="form-horizontal" #siteForm="ngForm">
      <fieldset>
        <legend>Assign New Form</legend>

        <div class="form-group">
          <label class="col-sm-4 control-label" for="xf">Select Form</label>

          <div class="col-sm-4">
            <select class="form-control" id="xf" name="xf" required
            [(ngModel)]="model.xf" #xf="ngModel" >
              <option *ngFor="let xf of xForms" [value]="xf.id">{{xf.title}}</option>
            </select>
          </div>
          <div class="col-sm-4">
            <button class="btn btn-default" type="button" (click)="reloadForms()">Refresh</button>
          </div>
        </div>

        <div class="form-group">
          <label class="col-sm-4 control-label" for="formtype">Select Form Type </label>

          <div class="col-sm-4">
            <select class="form-control" id="formtype" name="formtype" required
            [(ngModel)]="formType" (change)="onChange($event.target.value)">
              <option value="1">Staged </option>
              <option value="2">Scheduled </option>
              <option value="3">Normal </option>
            </select>
          </div>
        </div>

        <div class="form-group" *ngIf="formType==1">
          <label class="col-sm-4 control-label" for="stage">Select Stage</label>

          <div class="col-sm-4">
            <select class="form-control" id="stage" name="stage" [(ngModel)]="model.stage" #stage="ngModel" >
              <option *ngFor="let xf of stages" [value]="xf.id">{{xf.name}}: order {{xf.order}}: of Main Stage {{xf.main_stage}}</option>
            </select>
          </div>
          <div class="col-sm-4">
            <button class="btn btn-default" type="button" (click)="newStageModalOpen()">Add Stage</button>
          </div>
        </div>

        <div class="form-group" *ngIf="formType==2">
          <label class="col-sm-4 control-label" for="stage">Select Schedule</label>

          <div class="col-sm-4">
            <select class="form-control" id="schedule" name="schedule" [(ngModel)]="model.schedule" #schedule="ngModel" >
              <option *ngFor="let xf of schedules" [value]="xf.id">{{xf.name}} Range :{{xf.date_range_start}} to : {{xf.date_range_end}} : days {{xf.days}}</option>
            </select>
          </div>
          <div class="col-sm-4">
            <button class="btn btn-default" type="button" (click)="newScheduleOpen()">Add Schedule</button>
          </div>
        </div>

         <div class="form-group">
          <label class="col-sm-4 control-label" for="shared_level">Share This Form To</label>

          <div class="col-sm-4">
            <select class="form-control" id="shared_level" name="shared_level"
            [(ngModel)]="model.shared_level" >
               <option value="1">Global </option>
              <option value="2">Organization </option>
              <option value="3">Private </option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <div class="col-md-8">
            <button class="btn btn-success" id="button1id" name="button1id" 
             [disabled]="!siteForm.form.valid" (click)="onSubmit()">Save</button> 
            <button class="btn btn-danger" id="button2id"
            name="button2id" type="button" (click)="siteForm.reset()">Reset</button>
          </div>
        </div>
      </fieldset>
    </form>
  </div>
</div>


<div class="heroes" *ngIf="!displayForm">
  <div>
    Forms Assigned To This Site
  </div>


  <div *ngFor="let form of siteForms">
    <span>Name: <b>{{form.name}}</b></span> <span>Description:
    {{form.descriptionText}}</span> <span>Staged: {{form.is_staged}}</span>
    <span>Scheduled:{{form.is_scheduled}}</span> <a href=
    "http://localhost:8001/forms/reports/{{form.id}}">View Submission Data</a>
    <a href="http://localhost:8000/">Preview Form</a>
  </div>
</div>
  <button (click)="goBack()">Back</button>



  

<!-- <add-schedule></add-schedule> tag here -->


<modal #scheduleModal>
    <modal-header >
        <h4 class="modal-title">Add New Schedule</h4>
    </modal-header>
    <modal-body>
      <div class="container" *ngIf="displayForm">
          <form class="form-horizontal" #siteForm="ngForm">
            <fieldset>

               <div class="form-group">
                <label class="col-sm-4 control-label" for="day">Schedule Name</label>
                <div class="col-sm-4">
                     <input type="text" class="form-control" id="name"
               required
               [(ngModel)]="new_schedule.name" name="name"
               #name="ngModel" >
                </div>


                <div class="col-sm-4">
                  
                </div>
              </div>
              
              <div class="form-group">
                <label class="col-sm-4 control-label" for="start">Start Date</label>
                <div class="col-sm-4">
                     <input type="date" class="form-control" id="startdate"
               required
               [(ngModel)]="new_schedule.date_range_start" name="name"
               #name="ngModel" >
                </div>


                <div class="col-sm-4">
                  
                </div>
              </div>
            
             <div class="form-group">
                <label class="col-sm-4 control-label" for="start">End Date</label>
                <div class="col-sm-4">
                     <input type="date" class="form-control" id="enddate"
               required
               [(ngModel)]="new_schedule.date_range_end" name="name"
               #name="ngModel" >
                </div>


                <div class="col-sm-4">
                  
                </div>
              </div>

              <div class="form-group">
                <label class="col-sm-4 control-label" for="day">Select Days</label>
                <div class="col-sm-4" *ngFor="let sd of selectedDays">
                    <span><b>{{sd.day}}</b>X</span>
                </div>


                <div class="col-sm-4">
                  <select class="form-control" multiple (change)="setSelected($event.target)">
                    <option *ngFor="let item of days" [value]="item.index">{{item.day}}</option>
                  </select>
                </div>
              </div>

            </fieldset>
          </form>
        </div>

    </modal-body>
    <modal-footer>
      <button class="btn btn-default" type="button" (click)="newScheduleClose()">Save</button>
  </modal-footer>
</modal>

<modal #stageModal>
    <modal-header >
        <h4 class="modal-title">Add New Stage</h4>
    </modal-header>
    <modal-body>
        Stage Form
    </modal-body>
    <modal-footer [show-default-buttons]="true"></modal-footer>
</modal>




